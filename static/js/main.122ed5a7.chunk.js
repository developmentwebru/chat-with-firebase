(this["webpackJsonpchat-ulbitv"]=this["webpackJsonpchat-ulbitv"]||[]).push([[0],{78:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t),n.d(t,"Context",(function(){return D}));var a=n(1),c=n(15),i=n.n(c),r=n(26),s=(n(78),n(42)),o=n(121),j=n(130),u=n(124),d=n(125),l="/login",b="/chat",h=n(29),O=n(7);var x=function(){var e=Object(a.useContext)(D).auth,t=Object(h.a)(e),n=Object(r.a)(t,1)[0];return Object(O.jsx)(o.a,{position:"static",children:Object(O.jsx)(u.a,{variant:"dense",children:Object(O.jsx)(d.a,{container:!0,justify:"flex-end",children:n?Object(O.jsx)(j.a,{variant:"outlined",onClick:function(){return e.signOut()},children:"\u0412\u044b\u0439\u0442\u0438"}):Object(O.jsx)(s.b,{to:l,children:Object(O.jsx)(j.a,{variant:"outlined",children:"\u041b\u043e\u0433\u0438\u043d"})})})})})},p=n(17),m=n(40),v=n.n(m),f=n(50),g=n(126),w=n(127),y=n(131),k=n(63);var C=function(){return Object(O.jsx)(g.a,{children:Object(O.jsx)(d.a,{container:!0,style:{height:window.innerHeight-50},alignItems:"center",justify:"center",children:Object(O.jsx)(d.a,{container:!0,alignItems:"center",direction:"column",children:Object(O.jsx)("div",{className:"lds-dual-ring"})})})})},N=n(64);var I=function(){var e=Object(a.useContext)(D),t=e.auth,n=e.firestore,c=Object(h.a)(t),i=Object(r.a)(c,1)[0],s=Object(a.useState)(""),o=Object(r.a)(s,2),u=o[0],l=o[1],b=Object(k.a)(n.collection("messages").orderBy("createdAt")),x=Object(r.a)(b,2),p=x[0],m=x[1],I=function(){var e=Object(f.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.collection("messages").add({uid:i.uid,displayName:i.displayName,photoURL:i.photoURL,text:u,createdAt:N.a.firestore.FieldValue.serverTimestamp()}),l("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m?Object(O.jsx)(C,{}):Object(O.jsx)(g.a,{children:Object(O.jsxs)(d.a,{container:!0,style:{height:window.innerHeight-55,marginTop:"5px"},justify:"center",children:[Object(O.jsx)("div",{className:"chat",children:p.map((function(e){return Object(O.jsx)("div",{className:i.uid===e.uid?"messages":"messages-unknown",children:Object(O.jsxs)(d.a,{container:!0,children:[Object(O.jsxs)("div",{className:i.uid===e.uid?"bubble":"bubble-unknown",children:[Object(O.jsx)("div",{className:i.uid===e.uid?"displayName":"displayName-unknown",children:e.displayName}),Object(O.jsx)("div",{className:i.uid===e.uid?"message":"message-unknown",children:e.text})]}),Object(O.jsx)("div",{className:i.uid===e.uid?"avatar":"avatar-unknown",children:Object(O.jsx)(y.a,{src:e.photoURL})})]})},e.createdAt)}))}),Object(O.jsxs)(d.a,{container:!0,direction:"column",alignItems:"flex-end",style:{width:"80%"},children:[Object(O.jsx)(w.a,{fullWidth:!0,rowsMax:2,variant:"outlined",value:u,onChange:function(e){return l(e.target.value)}}),Object(O.jsx)(j.a,{onClick:I,variant:"outlined",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]})]})})},A=n(129),G=n(34),T=[{path:l,Component:function(){var e=Object(a.useContext)(D).auth,t=function(){var t=Object(f.a)(v.a.mark((function t(){var n,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new G.a.auth.GoogleAuthProvider,t.next=3,e.signInWithPopup(n);case 3:a=t.sent,a.user;case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(O.jsx)(g.a,{children:Object(O.jsx)(d.a,{container:!0,style:{height:window.innerHeight-50},alignItems:"center",justify:"center",children:Object(O.jsx)(d.a,{style:{width:400,background:"lightgray"},container:!0,alignItems:"center",direction:"column",children:Object(O.jsx)(A.a,{p:5,children:Object(O.jsx)(j.a,{onClick:t,variant:"outlined",children:"\u0412\u043e\u0439\u0442\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e Google"})})})})})}}],P=[{path:b,Component:I}],V=function(){var e=Object(a.useContext)(D).auth,t=Object(h.a)(e);return Object(r.a)(t,1)[0]?Object(O.jsxs)(p.d,{children:[P.map((function(e){var t=e.path,n=e.Component;return Object(O.jsx)(p.b,{path:t,component:n,exact:!0},t)})),Object(O.jsx)(p.a,{to:b})]}):Object(O.jsxs)(p.d,{children:[T.map((function(e){var t=e.path,n=e.Component;return Object(O.jsx)(p.b,{path:t,component:n,exact:!0},t)})),Object(O.jsx)(p.a,{to:l})]})};var B=function(){var e=Object(a.useContext)(D).auth,t=Object(h.a)(e),n=Object(r.a)(t,2);return n[0],n[1]?Object(O.jsx)(C,{}):Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)(s.a,{children:[Object(O.jsx)(x,{}),Object(O.jsx)(V,{})]})})};n(88),n(89);G.a.initializeApp({apiKey:"AIzaSyDc61mg9t1VJ-FQakgGP0YgObkTislxGVM",authDomain:"chat-react-7afa5.firebaseapp.com",projectId:"chat-react-7afa5",storageBucket:"chat-react-7afa5.appspot.com",messagingSenderId:"97579506131",appId:"1:97579506131:web:dc2061c19821af5a7db726",measurementId:"G-VQF5WTD8QT"});var D=Object(a.createContext)(null),F=G.a.auth(),H=G.a.firestore();i.a.render(Object(O.jsx)(D.Provider,{value:{firebase:G.a,auth:F,firestore:H},children:Object(O.jsx)(B,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.122ed5a7.chunk.js.map